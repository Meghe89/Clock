<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content=
        "width=device-width, initial-scale=1.0">
    <title>Geolocation - City</title>
</head>
<body>
    <div class="container">
        <h1 class="status"></h1>
        <button class="find-state">Find my state</button>
    </div>
    <script>
        const findMyState = () =>{
            const status =  document.querySelector('.status');


            const success = (position) => {
                console.log(position);
                const latitude = /* 40.777869 */ position.coords.latitude;
                const longitude = /* 14.260641 */ position.coords.longitude;

                const geoApiUrl = `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=it`

                fetch(geoApiUrl)
                .then(res => res.json())
                .then(data => {
                    status.textContent = data.city.split(' ')[3];
                    console.log(data);
                    console.log(`${data.city.split(' ')[3]} `);
                })

            }

            const error = () =>{
                status.textContent = `Unable to retrieve your location`
            }
            navigator.geolocation.getCurrentPosition(success,error);
        }
        document.addEventListener('DOMContentLoaded', findMyState);
    </script>
    </body>
</html>